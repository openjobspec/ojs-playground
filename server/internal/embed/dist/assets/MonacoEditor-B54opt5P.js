import{j as l}from"./xyflow-CJyVUiIq.js";import{j as s}from"./recharts-DRy4a5l3.js";import p from"./index-BSLHEKLl.js";import{u as i,a as j,j as g,r as b,b as v,e as M}from"./index-BdKS3nI6.js";function S(){const c=s.useRef(null),t=i(e=>e.editorContent),r=i(e=>e.validationResult),u=i(e=>e.initFromContent),{resolvedTheme:m}=j(),d=s.useCallback((e,o)=>{c.current=e,o.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:"https://openjobspec.org/schemas/v1/job.json",fileMatch:["*"],schema:g},{uri:"https://openjobspec.org/schemas/v1/retry-policy.json",fileMatch:[],schema:b},{uri:"https://openjobspec.org/schemas/v1/unique-policy.json",fileMatch:[],schema:v},{uri:"https://openjobspec.org/schemas/v1/error.json",fileMatch:[],schema:M}]}),t&&e.setValue(t)},[t]),h=s.useCallback(e=>{e!==void 0&&u(e)},[u]);return s.useEffect(()=>{const e=c.current;if(!e)return;const o=window.monaco;if(!o)return;const n=e.getModel();if(n)if(r.valid)o.editor.setModelMarkers(n,"ojs",[]);else{const f=r.errors.filter(a=>a.keyword!=="parse").map(a=>({severity:8,message:a.message,startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1}));o.editor.setModelMarkers(n,"ojs",f)}},[r]),l.jsx(p,{height:"100%",language:"json",theme:m==="dark"?"vs-dark":"vs",defaultValue:t,onChange:h,onMount:d,options:{minimap:{enabled:!1},fontSize:13,lineNumbers:"on",scrollBeyondLastLine:!1,wordWrap:"on",tabSize:2,automaticLayout:!0,formatOnPaste:!0,suggest:{showWords:!1}},loading:l.jsx("div",{className:"flex h-full items-center justify-center text-muted-foreground",children:"Loading editor..."})})}export{S as MonacoEditor};
